# Контейнерная диаграмма экосистемы умного дома

## Описание архитектуры

Архитектура системы умного дома построена на микросервисах, что позволяет обеспечить модульность, масштабируемость и гибкость системы. Основные компоненты включают сервисы управления устройствами и их регистрацией, автоматизации, мониторинга, управления пользователями и доступом, а также интеграции с внешними устройствами. Взаимодействие между компонентами организовано через **API Gateway** и шину данных **Kafka**.

### [Визуализация контейнеров](Containers%20diagram.puml)

### Контейнеры системы

- **API Gateway**
  - **Технология:** Gateway
  - **Описание:** Управляет входящими запросами и маршрутизацией к соответствующим микросервисам.

- **Device Management & Registration Service**
  - **Технология:** Java/Spring Boot
  - **Описание:** Сервис управления устройствами и их регистрацией. Обеспечивает функции управления устройствами умного дома, их состоянием и регистрацией.
  - **Взаимодействие:**
    - Обрабатывает команды управления устройствами, поступающие от **Automation Service**.
    - Публикует события изменения состояния устройств в **Kafka**.
    - Хранит и обновляет данные об устройствах в **Device Database**.

- **Automation Service**
  - **Технология:** Java/Spring Boot
  - **Описание:** Сервис автоматизации сценариев. Обрабатывает сценарии автоматизации для управления устройствами.
  - **Взаимодействие:**
    - Получает события с датчиков и устройств через **Kafka**.
    - Направляет команды управления устройствами в **Device Management & Registration Service**.

- **Monitoring Service**
  - **Технология:** Java/Spring Boot
  - **Описание:** Сервис мониторинга. Обеспечивает мониторинг состояния устройств и собирает данные с датчиков.
  - **Взаимодействие:**
    - Публикует данные с датчиков и устройств в **Kafka** для использования другими сервисами.

- **User & Access Control Management Service**
  - **Технология:** Java/Spring Boot
  - **Описание:** Сервис управления пользователями и доступом. Обеспечивает управление учетными записями пользователей и их правами доступа.
  - **Взаимодействие:**
    - Взаимодействует с **User & Access Control Database** для хранения и получения данных о пользователях и их правах.

- **Device Integration Service**
  - **Технология:** Java/Spring Boot
  - **Описание:** Сервис интеграции устройств. Обеспечивает взаимодействие с внешними устройствами и их интеграцию в систему.
  - **Взаимодействие:**
    - Публикует данные и команды устройств в **Kafka**.
    - Передает данные и команды в **Device Management & Registration Service**.

### Базы данных

- **User & Access Control Database**
  - **Технология:** PostgreSQL
  - **Описание:** База данных пользователей и управления доступом. Содержит информацию об учетных записях и правах доступа пользователей.

- **Device Database**
  - **Технология:** PostgreSQL
  - **Описание:** База данных устройств. Хранит данные о зарегистрированных устройствах и их состояниях.

### Шина данных

- **Kafka**
  - **Технология:** Message Broker
  - **Описание:** Шина данных для обмена сообщениями между микросервисами. Используется для передачи данных от устройств, датчиков и управления устройствами.

### Внешние системы

- **Пользователь**
  - **Описание:** Пользователь системы, который взаимодействует с ней через веб-интерфейс для управления устройствами и мониторинга.

- **Устройство**
  - **Описание:** Интеллектуальные устройства (например, датчики, камеры, термостаты), которые управляются через систему.

### Взаимодействие между компонентами

- Пользователь отправляет запросы на управление и мониторинг через **API Gateway**.
- **API Gateway** маршрутизирует запросы к соответствующим микросервисам, таким как **Device Management & Registration Service**, **Automation Service**, **Monitoring Service**, **User & Access Control Management Service**, и **Device Integration Service**.
- **Monitoring Service** публикует данные с датчиков в **Kafka** для обработки другими сервисами, такими как **Automation Service**.
- **Automation Service** реагирует на события от **Monitoring Service** и **Kafka**, создавая и направляя команды управления устройствами в **Device Management & Registration Service**.
- **Device Management & Registration Service** взаимодействует с **Device Database** для хранения и получения данных об устройствах.
- **User & Access Control Management Service** взаимодействует с **User & Access Control Database** для управления учетными записями пользователей.
- Устройства обмениваются данными и командами через **Device Integration Service** и **Device Management & Registration Service**.

## Заключение

Эта архитектура обеспечивает гибкость и масштабируемость системы умного дома, позволяя легко добавлять новые устройства, интегрировать их с существующими системами, а также управлять ими через унифицированный интерфейс.

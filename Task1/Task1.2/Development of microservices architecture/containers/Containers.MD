# Контейнерная диаграмма экосистемы умного дома

## Описание архитектуры

Архитектура системы умного дома базируется на микросервисах, что обеспечивает модульность, масштабируемость и гибкость. Основные компоненты системы включают в себя сервисы управления устройствами, автоматизации, мониторинга, управления пользователями и интеграции с внешними устройствами. Взаимодействие между компонентами организовано через API Gateway и шину данных Kafka.
###  [Визуализация контейнеров](Containers%20diagram.puml)
### Контейнеры системы

- **API Gateway**
    - **Технология:** Gateway
    - **Описание:** Управляет входящими запросами и маршрутизацией к соответствующим микросервисам.

- **Device Management Service**
    - **Технология:** Java/Spring Boot
    - **Описание:** Сервис управления устройствами. Обеспечивает функции управления устройствами умного дома.

- **Automation Service**
    - **Технология:** Java/Spring Boot
    - **Описание:** Сервис автоматизации сценариев. Обрабатывает сценарии автоматизации для управления устройствами.
    - **Взаимодействие:**
        - Получает данные о состоянии устройств и датчиков через **Monitoring Service**.
        - Использует **Kafka** для получения событий от других сервисов и публикации команд управления.
        - Направляет команды управления устройствами в **Device Management Service**.

- **Monitoring Service**
    - **Технология:** Java/Spring Boot
    - **Описание:** Сервис мониторинга. Обеспечивает мониторинг состояния устройств и собирает данные с датчиков.

- **User Management Service**
    - **Технология:** Java/Spring Boot
    - **Описание:** Сервис управления пользователями. Обеспечивает управление учетными записями пользователей.

- **Access Control Service**
    - **Технология:** Java/Spring Boot
    - **Описание:** Сервис управления правами доступа. Управляет правами доступа пользователей к различным устройствам и сервисам.

- **Device Registration Service**
    - **Технология:** Java/Spring Boot
    - **Описание:** Сервис регистрации устройств. Обеспечивает регистрацию новых устройств в системе.

- **Device Integration Service**
    - **Технология:** Java/Spring Boot
    - **Описание:** Сервис интеграции устройств. Обеспечивает взаимодействие с внешними устройствами и интеграцию с системой.

### Базы данных

- **User Database**
    - **Технология:** PostgreSQL
    - **Описание:** База данных пользователей. Содержит информацию об учетных записях и правах доступа пользователей.

- **Device Database**
    - **Технология:** PostgreSQL
    - **Описание:** База данных устройств. Хранит данные о зарегистрированных устройствах и их состояниях.

### Шина данных

- **Kafka**
    - **Технология:** Message Broker
    - **Описание:** Шина данных для обмена сообщениями между микросервисами. Используется для передачи данных от датчиков и управления устройствами.

### Внешние системы

- **Пользователь**
    - **Описание:** Пользователь системы, который взаимодействует с ней через веб-интерфейс для управления устройствами и мониторинга.

- **Устройство**
    - **Описание:** Интеллектуальные устройства (например, датчики, камеры, термостаты), которые управляются через систему.

### Взаимодействие между компонентами

- Пользователь отправляет запросы на управление и мониторинг через **API Gateway**.
- **API Gateway** маршрутизирует запросы к соответствующим микросервисам, таким как **Device Management Service**, **Automation Service**, **Monitoring Service**, **User Management Service**, **Access Control Service**, **Device Registration Service**, и **Device Integration Service**.
- **Monitoring Service** публикует данные с датчиков в **Kafka** для обработки в других сервисах, таких как **Automation Service**.
- **Automation Service** реагирует на события от **Monitoring Service** и **Kafka**, создавая и направляя команды управления устройствами в **Device Management Service**.
- **Device Management Service** взаимодействует с **Device Database** для хранения и получения данных об устройствах.
- **User Management Service** взаимодействует с **User Database** для управления учетными записями пользователей.
- Устройства обмениваются данными и командами через **Device Integration Service** и **Device Management Service**.
- **Device Registration Service** используется для регистрации новых устройств в системе.

## Заключение

Эта архитектура обеспечивает гибкость и масштабируемость системы умного дома, позволяя легко добавлять новые устройства, интегрировать их с существующими системами, а также управлять ими через унифицированный интерфейс.

@startuml
entity "User" as user {
  *id : UUID <<PK>>
  --
  *name : String
  *email : String
  *password_hash : String
  --
  +created_at : DateTime
  +updated_at : DateTime
}

entity "House" as house {
  *id : UUID <<PK>>
  --
  *name : String
  *type_id : UUID <<FK>>
  *user_id : UUID <<FK>>
  --
  +created_at : DateTime
  +updated_at : DateTime
}

entity "HouseType" as housetype {
  *id : UUID <<PK>>
  --
  *name : String
  *description : String
}

entity "Device" as device {
  *id : UUID <<PK>>
  --
  *serial_number : String
  *type_id : UUID <<FK>>
  *house_id : UUID <<FK>>
  *status : String
  --
  +created_at : DateTime
  +updated_at : DateTime
}

entity "DeviceType" as devicetype {
  *id : UUID <<PK>>
  --
  *name : String
  *description : String
}

entity "Module" as module {
  *id : UUID <<PK>>
  --
  *name : String
  *device_id : UUID <<FK>>
  *status : String
  --
  +created_at : DateTime
  +updated_at : DateTime
}

entity "TelemetryData" as telemetry {
  *id : UUID <<PK>>
  --
  *device_id : UUID <<FK>>
  *timestamp : DateTime
  *data : JSON
  --
  +created_at : DateTime
}

' Связи
user ||--o{ house : "owns"
housetype ||--o{ house : "defines"
house ||--o{ device : "contains"
device ||--o{ module : "has"
devicetype ||--o{ device : "defines"
device ||--o{ telemetry : "generates"
@enduml
